function displayCol(x,y)
{
    $('<div id="col-'+x+'-'+y+'"></div>').css({backgroundColor:"red",opacity:"0.4",height:"32px",width:"32px",position:"absolute",top:""+32*y+"px",left:""+32*x+"px"})
    .appendTo('#ground')
}

function showCol()
{
    for(var i_x=0; i_x < map.x; i_x++)
    {
        for(var i_y=0; i_y < map.y; i_y++)
        {
            if(map.col[i_y*map.x + i_x] == "1")
            {
                displayCol(i_x,i_y);
            }
        }
    }
}

String.prototype.replaceAt=function(index, character)
{
    return this.substr(0, index) + character + this.substr(index+character.length);
}

function addCol(x,y)
{
    map.col = map.col.replaceAt(y*map.x + x, "1");
}


function colisionAdderStart()
{
    oldMClick = hero.mClick;	
    showCol();
    hero.mClick = function (j)
    {
        var k = $("#ground").offset();
        var x = (j.clientX - k.left) >> 5,
            y = (j.clientY - k.top) >> 5;
        message("add colision at:"+x+","+y);
        addCol(x,y);
        displayCol(x,y);
    };
}

function colisionAdderStop()
{
    hero.mClick = oldMClick;
}

function addWater(x,y,depth)
{
    map.water[x+256*y]=depth;
}

function ithanSpringStart()
{
  	return
    //mapy na wiosne!
    if(map.id == 1 && nerthus.season() == 1)
    {	
        var colIthWiosna = "000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001100000000000000000000000000000000000000000000000000000000000001001000000000000000000000000000000000000000000000000000000000000100100000000000000000000000000000000000000000000000000000000000010010000000000000000000000000000000000000000000000011100000000001001000000111010000000000000000000000000000000000001011000000000100100000100010110000100000000000000000000000000001100010000000010010000010000000100000000001000000011110000000000110010000000001001000010000001100000001111111001010000101111000001001000000000100100010000001000000011000001011010000001000011000100110000000010010010000000100000010100000000000000000000000100010000100000001001000100000010000001001100000000000000000000010010000010000000100100001000010000000101010000000000000000000001010000001111111110010000010001000000001000100000000000000000000101000010000011111001000001000100000000000010000001111111000000010010000000000000100100001000001000000000001000001111111100001101010000011111111110010001000000111000000000100001000000001000110101000001000000001001000100011000010000000010000100000000100000010100000100000000100100010110010000000000001000010000000010000001010000010000000010010000101000100000000000101111000000001000000101000010000000001001000010110001000000000010111100000000100000010100001000000000100100010000100100000000000100100000000001110001010000100000000010010000111011110000000000000000000000000001000101000100000000001001111100000000000000000000000000000000000100010100001000000000100100000011000000000000000000000000000000010001010011000000000010010111110100000000000000000000000000000001000101001100000000001001100000001110000000000000000000000000000100010100001000000000100100000000001000000000000000000000000000010001010011000000111010010000000000100000000000000000000000000001000111000010000100011001000000000010000000000000000000000000001000011000001000010001100100000000001000000000000000000000000000100000000111000001000110010000000000100000000000000000000000000010000000010000000100001001000000000010000000000000000000000000001000000001100000100000100100000111111000000000000000000000000000100000000001111110001110010000110000000011110000000000000000111011000000000000000000101001000010000000000000111000000000011100010000000000000000000010100100010000000000111000010000000010000000000000000011111111110010010000110000001100101110000000001000000000000000001000000000001001000001000001000010100000000000100000000011000000100000000000100100000100011000110010000000000011111100001100000010100000000010010000010010000000001111000000000111110000000000001000000000001001000010001000000000010010000000000001000000000001100000000000111100001000100000111100001000000000000100000000001100000000000110010000010001000000010011100000000000010000000000100000000000010001000001001000000001001110000000000001000000000010001000000110000100001101000000101000111000000000000100000000001111010000101010010001000100000001000011100000000000010000000001111111111101101001000011011100000000100010000011111111000000000111000000000010100100000100001000000000001000110000000000000000000000000000001010010000010000111101000100100100000000000000000000000000000000001001000001010000000000000110001111111111110000000000000100001000100111111101000000000010101000000000000001000000000000101001010010010000100111111000000010100000000000000011111000001111111111111001001100011111110010001110000000000000000000100000100000000000000101010001000011000000001000000000000000000010000010000000000000010100100000000100000100100000000000000000001000001111111111111111011110000000001000000110000000000000000000100000100000000000000100001001000000011110101000000000000000000010000010000000000000010111100111000000001011100000000000000000001000001000000000000001100010011110000011101010000000000000000000100000100000000000000101110000001110010100001111111111111111111110000011111111111111111000000000011110001000000000000111000111100000000000011000000000000000000001110000100000000000000000000000000000000000000000000011000000001001000001100000111100000000000000000000000000000000110010000000100000000001000010010000000000000000000000011111111100000100000010000000000011001001001100000000000000000011000100100111101001100100000000000011001001010011110000000000011100001010110010011111100000000000000000100100110001000000000000101111100101101111000010000000000000000100010000000011000000000000000010010010000001110111000000000000010110000000000011100000000111000010100111100010111000000000000000100000000000000011000000010000000010000001000010010000000000000011000000001100001100000001110000001111000010000100000000000000010100001111001001000000000100100000000011111100000000000000000001010001000100100100000000001001000000000001111010000000000000000101000101011010010000011000011011111100000000111000000001100000100100010001101001000010100000010000001100000001100000001001011111010001100000101000001001100000100000001111000010000000100010000001000100000001000001000010000001111110000010000000000100000010001000010000000000001000000110000011000110000111000000100000000000100011000000000000100000001000000000000111100011000001000000001100010010000000000010000000010110000000000011000011000101000000111111000001000000110000000000100100001100000011100000010000000000000000000000000100000100000000010001111000000001100000100000000000000000000000010000101000001110000100110000000011000100011000000001111000000110000100011111000000110000101100000000001010011000000100100000100000010001000010000011000001001000000000010001000110010010000010010010011011001000000111111000100000000000000011100110010000001110101000100101000000000000010001011000000000000000000001000000000011000110011000110000000000100010100000000000000000000100000000000000111010100100100011000011110001000000000000000010100000000000001110011001010001010100000000100000000000000000010100000000000001111001100110000010001110111010000000000000000001000000000000000100100000100000000000011111010000";
        var colIthNormal = map.col;
        map.col = colIthWiosna;
        $('#lagmeter').click(function(){map.col = colIthNormal; message('zmieniono kolizje');})

        var waterIthan = [[46,85,8],[47,85,8],[48,85,8],
                          [45,86,8],[46,86,16],[47,86,8],
                          [45,87,8],[46,87,16],[47,87,8],
                          [43,88,8],[44,88,8],[45,88,8],[46,88,16],[47,88,8],
                          [43,89,8],[44,89,16],[45,89,16],
                          [42,90,8],[43,90,16],[44,90,16],[45,90,16],[46,90,16],[47,90,16],[48,90,8],
                          [42,91,8],[43,91,16],[46,91,16],[47,91,16],[48,91,16],[49,91,8],[50,91,8],[51,91,8],[52,91,8],[53,91,8],[54,91,16],[55,91,16],
                          [48,92,8],[49,92,16],[52,92,16],[53,92,16],[54,92,16],[55,92,16],
                          [53,93,8],[54,93,16],[55,93,18]];
        for(i in waterIthan)
        {
            addWater(waterIthan[i][0],waterIthan[i][1],waterIthan[i][2]);
        }
        
        $("<img src='http://game3.margonem.pl/obrazki/npc/zwi/kaczki01.gif'>").css({position:"absolute",top:""+(32*90-16)+"px",left:""+32*44+"px"})
        .appendTo('#ground');
        
        $("<img src='http://game3.margonem.pl/obrazki/npc/zwi/kaczatko01.gif'>").css({position:"absolute",top:""+(32*87-16)+"px",left:""+32*46+"px"})
        .appendTo('#ground');
    }
}

g.loadQueue.push({fun:ithanSpringStart,data:""});
